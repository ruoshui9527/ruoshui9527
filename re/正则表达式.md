# 正则表达式

原文链接地址：https://deerchao.cn/tutorials/regex/regex.htm

正则测试地址：https://regexr.com

## 元字符
1. \b 匹配单词的开头或结束。 
2. \d 匹配数字。例：\d{2} 匹配两个数字
3. \w 匹配字母、数字、下划线、汉字
4. \s 匹配任意空白符
5. $  匹配字符串的结束。例：匹配5-12位的qq号，^\d{5,12}$。
6. ^  匹配字符串的开始
7. .  匹配除换行符以外的任意字符

## 字符转义
1. \ 查找元字符本身需使用转义字符。例：匹配deerchao.cn使用deerchao\\.cn,C:\windows使用C:\\\windows。

## 重复
1. \* 重复0次或无数次
2. \+ 重复1次或无数次
3. ? 重复0次或一次
4. {n} 重复n次
5. {n,} 重复n次或无数次
6. {n,m} 重复n到m次 

## 字符类
1. 使用方括号匹配集合。例：匹配元音字符[aeiou]，匹配数字[0-9]，
   \\(0?\d{2}[(-]?\d{8},匹配座机号码。

## 分支条件
例：\\({1}0\d{2,3}[)]{1}[-]?\d{8}|\d{2,3}[-]?\d{8}，
    不能识别 (022-87654321 此内容。
(010)88886666
022-22334455
02222334455
(022-87654321
010)12345678
(010)-88886666

## 分组
1. 重复多个字符使用小括号来表达分组(),后续跟{}指定分组重复的次数。 ((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?) 
 例：\d{1,3}匹配1到3位的数字

## 反义
1. \W 匹配不是字母、数字、下划线、汉字的字符。
2. \S 匹配不是空白符的字符。
3. \D 匹配不是数字的字符。
4. \B 匹配不是字符开头或结束的位置。
5. [^x] 匹配除了x以外的任意字符。
6. [^aeiou] 匹配除了aeiou这几个字母以外的任意字符。
7. \S+ 匹配不包含空白符的字符串。
8. <a[^>]+> 匹配尖括号括起来的以a开头的字符串。 

## 后向引用
1. \b(\w+)\b\s+\1\b 匹配重复的单词。如：go go，kitty kitty。
2. (exp) 匹配exp，并捕获文件到自动命名的组里。
3. (?<name>exp) 匹配exp，并捕获文件到名称为name的组里，也可 (?'name'exp)。
4. (?:exp) 匹配exp，不捕获匹配的文本，也不分配组号。
5. (?=exp) 匹配exp前面的位置
6. (?<=exp) 匹配exp后面的位置
7. (?!exp) 匹配后面跟的不是exp的位置
8. (?<!exp) 匹配前面不是exp的位置
9. (?#comment) 用于提供注释

## 零宽断言
1. (?=exp)，零宽度正预测先行断言，断言自身出现的位置的后面能匹配表达式exp。如：\b\w+(?=ing\b),匹配以ing结尾的单词的前面部分(除了ing以外的部分)，如查找 I'm singing while you're dancing时，它会匹配sing和danc。
2. （?<=exp)，零宽度正回顾后发断言，断言自身出现的位置的前面能匹配表达式exp。 如：(?<=\bre)\w+\b，匹配以re开头的单词的后半部分(除了re以外的部分)，如查找reading a book时，匹配ading。

## 负向零宽断言
1. \b\w*q[^u]\w\*\b 匹配包含后面不是字母u的字母q的单词。
2. 零宽度负预测先行断言 (?!exp) ，断言此位置的后面不能匹配表达式exp。如：\d{3}(?!\d) 三位数字，而且这三位数字的后面不能是数字。
\b((?!abc)\w)+\b 匹配不包含连续字符串abc的单词。
3. 零宽度负回顾后发断言 (?<!exp)，断言此位置的前面不能匹配表达式exp。如：(?<![a-z])\d{7} 匹配前面不是小写字母的七位数字。

## 注释
1. (?<= 断言要匹配的文本的前缀
2. <(\w+)> 查找尖括号括起来的内容
3. ) 前缀结束
4. .* 匹配任意文本
5. (?= 断言要匹配的文本的后缀
6. <\/\1> 查找尖括号括起来的内容
7. ) 后缀结束

## 贪婪与懒惰
1. *? 重复任意次，但尽可能少重复
2. +? 重复1次或更多次，但尽可能少重复
3. ?? 重复0次或1次，但尽可能少重复
4. {n,m}? 重复n到m次，但尽可能少重复
5. {n,}? 重复n次以上，但尽可能少重复

## 处理选项
1. IgnoreCase 忽略大小写，匹配时不区分大小写。
2. Multiline 多行模式，更改^和$的含义，使他们分别在任意一行的行首和行尾匹配。
3. Singleline 单行模式，更改 . 的含义，使它与每一个字符匹配(包括换行符\n)。
4. IgnorePatternWhitespace，忽略空行，忽略表达式中的非转义空白并启用由#标记的注释。
5. ExplicitCapture 显式捕获，仅捕获已被显式命名的组。

## 平衡组/递归匹配
1. (?'group') 把捕获的内容命名为group，并压入堆栈stack
2. (?'-group') 从堆栈上弹出最后压入堆栈的名为group的捕获内容，如果堆栈本来为空，则本分组的匹配失败。
3. (?(group)yes|no) 如果堆栈上存在以名为group的捕获内容的话，继续匹配yes部分的表达式，否则继续匹配no部分。
4. (?!) 零宽负向先行断言，由于后缀没有表达式，试图匹配总是失败。

```
< 最外层的左括号 
[^<>]* 它后面非括号的内容
(
  (
    (?'Open'<) 左括号，压入Open
    [^<>]* 左括号后面的内容
  )+
  (
    (?'-Open'>) 右括号，弹出Open
    [^<>]* 右括号后面的内容
  )+
)*
(?(Open)(?!)) 最外层的右括号前检查，若还有未弹出的Open，则匹配失败
> 最外层的右括号
```

## 其它
\a 报警字符，打印它的效果时电脑嘀一声

\b 通常是单词分界位置，但在字符类里使用代表退格

\t 制表符 Tab

\r 回车

\v 竖向制表符

\f 换页符

\n 换行符

\e Escape

\0nn ASCII代码中八进制代码为nn的字符

\xnn ASCII代码中十六进制代码为nn的字符

\cN ASCII控制字符。如：\cC代码Ctrl+C

\A 字符串开头，类似^,但不受处理多行选项的影响

\Z 字符串结尾或行尾，不受处理多行选项的影响

\z 字符串结尾，类似$，不受处理多行选项的影响

\G 当前搜索的开头

\p{name} Unicode中命名为name的字符类

(?>exp) 贪婪子表达式

(?<x>-<y>exp) 平衡组

(?im-nsx:exp) 在子表达式exp中改变处理选项

(?im-nsx) 为表达式后面的部分改变处理选项

(?(exp)yes|no) 把exp当作零宽正向先行断言，如果在这个位置能匹配，使用yes作为此组的表达式，否则使用no。

(?(exp)yes) 同上，只是使用空表达式作为no

(?(name)yes|no) 如果命名为name的组捕获到了内容，使用yes作为表达式，否则使用no。

(?(name)yes) 同上，只是使用空表达式作为no




